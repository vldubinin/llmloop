1. БАЗОВІ ПОНЯТТЯ І КЛАСИФІКАЦІЯ
1.1. Визначення і базові поняття
В найпростішому випадку, згідно принципів фон Неймана, будь-яка
система обробки інформації повинна мати наступні пристрої (рис. 1.1):
- арифметично-логічний пристрій (АЛП), який виконує арифметичні і
логічні операції;
- керуючий пристрій (КП), який організує процес виконання програм;
- запам’ятовуючий пристрій (ЗП), або пам'ять для зберігання програм і
даних;
- зовнішні пристрої для введення-виведення інформації (ПВВ).
Рис. 1.1. Структура системи обробки інформації згідно принципів фон
Неймана
Дані принципи в тій чи іншій мірі лежать в основі будь-яких сучасних
систем обробки інформації. Що ж представляє собою сучасна
мікропроцесорна система?
Мікропроцесорна система (МПС) – це функціонально і конструктивно
закінчений виріб, до складу якого входить мікропроцесор. МПС призначена
для отримання, аналізу, передавання та перетворення інформації.
Мікропроцесор (МП) – програмно-керований пристрій, як правило,
виконаний на одній великій інтегральній схемі (ВІС), який здійснює
керування процесом обробки інформації.
10
В сучасній техніці мікропроцесори часто об’єднують в одну систему з
різноманітними додатковими пристроями: оперативними і постійними
запам'ятовуючими пристроями (ОЗП і ПЗП), інтерфейсами, службовими
пристроями (тактовими генераторами (ТГ), таймерами, регістрів) тощо. Таке
об’єднання називають мікроконтролером (МК). Мікропроцесори та
мікроконтролери є основними елементами МПС.
Інтерфейс (англ. interface – засіб спряження, сполучення) є сукупністю
уніфікованих технічних і програмних засобів, необхідних для підключення
зовнішніх пристроїв. Він забезпечує перетворення сигналів МП у сигнали,
які сприймаються зовнішніми пристроями, і навпаки, підсилення сигналів та
являє собою апаратні засоби і набір програм передачі даних (уніфікований
протокол обміну інформацією).
В даний час існує величезна кількість типів мікроконтролерів, які
відрізняються архітектурою процесорного модуля, розміром і типом
вбудованої пам'яті, набором периферійних пристроїв, типом корпусу тощо.
Мікропроцесори і мікроконтролери є основою мікропроцесорних
систем.
У мікропроцесорній техніці часто використовують термін контролер
(від англ. controller – керуючий пристрій). Він має різне значення залежно від
характеру застосування. В одному з варіантів його використовують як назву
пристроїв управління периферійними пристроями мікропроцесорних систем
(контролер клавіатури, контролер переривань тощо). Саме в цьому сенсі цей
термін буде використано в даному посібнику.
Архітектурою процесора називається комплекс його апаратних і
програмних засобів, що надаються користувачеві, а саме: набір доступних
програмних регістрів і виконавчих (операційних) пристроїв, система команд і
способів адресації, об’єм і структура пам'яті, види і способи обробки
переривань.
Регістр процесора – блок комірок пам'яті, який утворює надшвидку
оперативну пам'ять всередині процесора; використовується самим
11
процесором і здебільшого недоступний програмісту: наприклад, при виборці
з пам'яті чергової команди вона поміщається в регістр команд, до якого
програміст звернутися не може.
При описі архітектури і функціонування мікропроцесора зазвичай
використовується його подання у вигляді сукупності програмно-доступних
регістрів, що утворюють регістрову або програмну модель. У цих регістрах
містяться оброблювані дані (операнди) і керуюча інформація. Відповідно, у
регістрову модель входить група регістрів загального призначення (РЗП),
призначених для зберігання операндів, і група службових регістрів, які
забезпечують керування ходом виконання програми, режимом роботи
процесора та організацію роботи з пам'яттю.
Регістри загального призначення утворюють регістровий пристрій
(РП), який представляє собою внутрішню регістрову пам'ять процесора.
Склад службових регістрів визначається конкретною архітектурою
мікропроцесора, зазвичай до нього входять:
- програмний лічильник – ПЛ (program counter – PC);
- регістр стану процесора – РСП (state register – SR);
- керуючий регістр (керує режимом роботи процесора) – КР (control
register – CR).
Регістрів РСП та КР може бути кілька. Це залежить від складності
процесора.
Як працює мікропроцесорна система?
У загальних рисах роботу мікропроцесорної системи можна описати
так. Спочатку за допомогою будь-якого зовнішнього пристрою в пам'ять
системи вводиться програма. Пристрій управління зчитує вміст комірки
пам'яті, де знаходиться перша інструкція (команда) програми (адреса цієї
команди міститься у ПЛ), і організовує її виконання. Ця команда може
задавати виконання арифметичних або логічних операцій, читання з пам'яті
даних для виконання цих операцій або записування їх результатів у пам'ять,
12
введення даних із зовнішнього пристрою в пам'ять або виведення даних з
пам'яті у зовнішній пристрій.
Як правило після виконання однієї команди пристрій управління
починає виконувати команду з комірки пам'яті, яка знаходиться
безпосередньо за тільки що виконаною командою. Однак цей порядок може
бути змінений за допомогою спеціальних команд передачі управління
(переходу), які вказують, з якої комірки пам'яті слід продовжити виконання
програми. Такий перехід може бути організований певним чином, що
дозволяє створювати складні програми.
Результат роботи процесора можна представити як зміну стану
регістрів, яка відбувається внаслідок виконання операторів програми або
оброблення сигналів від зовнішніх пристроїв. Зміна стану регістрів
приводить до зміни стану всієї системи. Зміна стану регістрів веде до зміни
електричного потенціалу на пов’язаних із ними зовнішніх виводах
мікроконтролера. Це дає змогу керувати зовнішніми пристроями (вмикати,
вимикати, змінювати режими їх роботи).
Даний опис дещо спрощений. Реальні системи на основі
мікропроцесорів та мікроконтролерів мають більш складну архітектуру і, як
наслідок, дещо інший алгоритм роботи. Приклад структурної схеми
сучасного мікроконтролера наведено на рис. 1.2.
Рис. 1.2. Структурна схема сучасного мікроконтролера
13
Навіть мікроконтролери з однаковою архітектурою можуть
відрізнятися набором функціональних вузлів і характером зв’язку між ними.
Однак будь-який мікроконтролер містить такі функціональні блоки:
- центральний процесор або процесорне ядро, яке складається з
керуючого пристрою (КП) і операційних пристроїв (ОП);
- внутрішня пам'ять (РП, кеш-пам'ять, блоки ОЗП і ПЗП);
- інтерфейсний блок, який забезпечує вихід на системну шину та обмін
даними із зовнішніми пристроями через паралельні або послідовні порти
введення / виведення;
- периферійні пристрої (таймерні модулі, аналого-цифрові
перетворювачі, спеціалізовані контролери);
- різні допоміжні схеми (генератори тактових імпульсів, схеми
налагодження і тестування, сторожовий таймер тощо).
Зв'язок між складовими частинами мікропроцесорної системи
здійснюється за допомогою внутрішньої контрольної магістралі (ВКМ), яка
складається із шини даних (ШД), шини адреси (ША) та шини керування
(ШК). Синхронізація роботи складових частин мікропроцесорної системи
здійснюється за допомогою тактового генератора (ТГ) та спеціальної схеми
синхронізації.
1.2. Класифікація мікроконтролерів
Існуючі мікроконтролери можна класифікувати за різними ознаками.
Так за розрядністю шини даних мікроконтролери можна поділити на
наступні класи:
- 1-бітні (МС14500 фірми Motorola);
- 4-бітні (Atmel MARC4, Winbond W742, NEC uPD75 тощо);
- 8-бітні (Intel MCS-48, Intel MCS-51, Atmel ATtiny/ATmega/ATXmega,
Microchip PIC12/16/18, Zilog Z86 тощо);
- 16-бітні (Intel MCS-96, Texas Instruments MSP430, Motorola 68HC16,
Fujitsu MB90, Infineon C16, Mitsubishi M16C, Microchip PIC24 тощо);
14
- 32-бітні (Atmel ARM, Fujitsu MB91, NEC V850, NXP LPC2xxx тощо).
Можливо з часом з’являться мікроконтролери з більшою розрядністю
шини даних, адже існують 64-бітні мікропроцесори (Athlon 64, Opteron,
Sempron, Turion 64, Phenom, Athlon II, Phenom II, Pentium D, Xeon, ARM
Cortex-A53, Cortex-A57 тощо).
За функціональним призначенням мікроконтролери можна поділити на
мікроконтролери загального призначення і спеціалізовані. Спеціалізовані, в
свою чергу, можна поділити на мікроконтролери цифрової обробки сигналів
(з плаваючою крапкою та з фіксованою крапкою), мікроконтролери для
керування двигунами та інші (рис. 1.3).
Рис. 1.3. Класифікація мікроконтролерів за призначенням
За типом архітектури мікроконтролери можна поділити на CISC
(Complex Instruction Set Computing) та RISC (Reduced Instruction Set
Computing) архітектури.
Особливості CISC-архітектури полягають в тому, що команди
виконуються по черзі (одна за одною) і мають різну довжину і структуру.
15
Вибірка команди з пам'яті здійснюється побайтово, а сама команда
виконується за кілька тактів. CISC-архітектуру мають: МК із сімейства
Motorola НС05 / НС08, МК з ядром MCS-51, МК із сімейства Infineon С500 і
низка інших.
Основна ідея RISC архітектури полягає в заміні складних команд
однотипними простими і виконанні їх єдиним потоком на паралельному
конвеєрі. Всі команди мають фіксовану довжину і в ідеалі мають
виконуватися за один, а не за кілька тактів, чим досягається підвищення
швидкодії. Саме ця архітектура вважається більш перспективною і натепер є
більш поширеною.
Одним з перших МК з архітектурою RISC став PIC-контролер 16С54
фірми Microchip. Завдяки високій продуктивності й трьом десяткам простих
команд PIC-контролери швидко завоювали популярність у всьому світі.
Невдовзі їх приклад наслідували розробники з фірм Atmel, Scenix та інші.
Іноді в класифікації за типом архітектури окремо виділяють
мікроконтролери з ARM архітектурою. Архітектура ARM (від англ. Advanced
RISC Machine – вдосконалена RISC-машина) – це RISC архітектура на основі
ліцензованих 32-бітних і 64-бітних мікропроцесорних ядер розробки компанії
ARM Limited.
За характером роботи з пам’яттю мікроконтролери можна поділити на
два типи: принстонський тип та гарвардський тип.
Принстонський тип був розроблений Джоном фон Нейманом і
незалежно від нього академіком С. О. Лебедєвим. У ньому використовується
спільна пам'ять для зберігання програм і даних (рис. 1.4). Основна перевага
полягає у спрощенні схемотехніки центрального процесора (ЦП) та в
гнучкості розподілу ресурсів між областями пам'яті.
Рис. 1.4. Принстонський тип роботи з пам’яттю
16
Особливістю гарвардського типу є наявність розділених адресних
просторів для зберігання команд і даних (рис. 1.5). Цей тип майже не
використовувався до кінця 1970-х років, поки розробники МК нарешті не
зрозуміли, що саме він дає їм певні переваги. Зокрема, аналіз реальних
програм показує, що об’єм пам'яті даних МК, використовуваний для
зберігання проміжних результатів, приблизно на порядок менший за
необхідний об’єм пам'яті програм. Значить, можна скоротити розрядність
шини даних, зменшити число транзисторів в мікросхемі, а заодно і
прискорити доступ до інформації. Як наслідок, зараз більшість сучасних МК
використовують RISC-архітектуру гарвардського типу.
Рис. 1.5. Гарвардський тип роботи з пам’яттю
Мікроконтролери об'єднуються в сімейства. До одного сімейства
відносять вироби, які мають однакове ядро – сукупність таких понять, як
система команд, циклограма роботи ЦП, організація пам'яті програм і пам'яті
даних, система переривань і базовий набір периферійних пристроїв.
Відмінності між різними представниками одного сімейства полягає, в
основному, в складі периферійних пристроїв і об’ємі пам'яті програм або
даних. Найбільш важлива особливість сімейства – програмна сумісність на
рівні двійкового коду всіх МК даного сімейства. Зазвичай фірма-виробник
дає ім'я сімейства свого МК. Наприклад, PIC16 – сімейство 16-бітних
мікроконтролерів фірми Microchip, AVR – сімейство мікроконтролерів фірми
Atmel.
17
Контрольні запитання
1. Наведіть структурну схему системи обробки інформації.
2. Дайте визначення поняття «мікропроцесорна система».
3. Дайте визначення поняття «мікропроцесор».
4. Чим мікроконтролер відрізняється від мікропроцесора?
5. Дайте визначення поняття «інтерфейс».
6. Дайте визначення поняття «архітектура процесора».
7. Дайте визначення поняття «регістр процесора».
8. Наведіть складові регістрової моделі.
9. Які функції виконують регістри загального призначення?
10. Які функції виконують службові регістри?
11. Що являє собою регістровий пристрій?
12. Наведіть типовий склад службових регістрів.
13. Опишіть загальний алгоритм роботи мікропроцесорної системи.
14. Наведіть узагальнену структурну схему сучасного мікроконтролера.
15. Перелічіть ознаки, за якими можна класифікувати мікроконтролери.
16. Наведіть класифікацію мікроконтролерів за розрядністю шини даних.
17. Наведіть класифікацію мікроконтролерів за функціональним
призначенням.
18. Наведіть класифікацію мікроконтролерів за типом архітектури.
19. У чому полягає основна ідея CISC архітектури?
20. У чому полягає основна ідея RISC архітектури?
21. Що представляє собою ARM архітектура?
22. Наведіть класифікацію мікроконтролерів за типом роботи з пам’яттю.
23. Опишіть суть принстонського типу роботи з пам’яттю.
24. Опишіть суть гарвардського типу роботи з пам’яттю.
25. У чому перевага гарвардського типу роботи з пам’яттю, порівняно із
принстонським?
26. Назвіть ознаки, за якими мікроконтролери відносять до різних сімейств.